# ğŸ¯ Quick Start Guide - Openfort Payment Gateway

## New Features Overview

### 1. **Connect Wallet Button**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Connect Wallet   ğŸ”—   â”‚  â† Click to open Openfort modal
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**What happens:**
- Opens Openfort authentication modal
- Choose Google or Wallet connection
- Creates/connects embedded wallet

---

### 2. **Network Selector** (After connecting)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸ¢ Hardhat Local    â–¼  â”‚  ğŸ’° 0.1234 ETH              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€0xAb...cd12  â–¼â”€â”˜
                           â””â”€ Click to expand dropdown â”€â”˜
```

**Dropdown shows:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Select Network            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŸ¢ Hardhat Local       âœ“  â”‚ â† Current network
â”‚     Chain ID: 31337        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”µ Arbitrum Sepolia       â”‚
â”‚     Chain ID: 421614       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. **Wallet Info Dropdown**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Wallet Address                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  ğŸ“‹     â”‚ â† Copy button
â”‚  â”‚ 0xAbc123...def456          â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  âœ“ Copied to clipboard!                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Balance                                 â”‚
â”‚  5700.0000 ETH                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”´ Disconnect                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Payment Flow Diagram

### **Minting NFT (Upload)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Upload    â”‚â”€â”€â”€â–¶â”‚  Encrypt &   â”‚â”€â”€â”€â–¶â”‚  Upload to    â”‚
â”‚    File     â”‚    â”‚  Generate    â”‚    â”‚     IPFS      â”‚
â”‚             â”‚    â”‚  Preview     â”‚    â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NFT       â”‚â—€â”€â”€â”€â”‚  Sign with   â”‚â—€â”€â”€â”€â”‚  Encode       â”‚
â”‚  Minted!    â”‚    â”‚  Openfort    â”‚    â”‚  Contract     â”‚
â”‚             â”‚    â”‚  Wallet      â”‚    â”‚  Call         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Purchasing Asset**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browse    â”‚â”€â”€â”€â–¶â”‚  Click       â”‚â”€â”€â”€â–¶â”‚  Approve      â”‚
â”‚   Gallery   â”‚    â”‚  "Purchase"  â”‚    â”‚  Payment      â”‚
â”‚             â”‚    â”‚              â”‚    â”‚  (Openfort)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Download   â”‚â—€â”€â”€â”€â”‚  Decryption  â”‚â—€â”€â”€â”€â”‚  Smart        â”‚
â”‚  Full File  â”‚    â”‚  Key         â”‚    â”‚  Contract     â”‚
â”‚             â”‚    â”‚  Received    â”‚    â”‚  Splits $     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Setup Steps

### 1. **Environment Variables**
Create/update `.env.local`:
```bash
# Contract
NEXT_PUBLIC_CONTRACT_ADDRESS=0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512

# Pinata IPFS
NEXT_PUBLIC_PINATA_JWT=eyJhbGci...
NEXT_PUBLIC_PINATA_GATEWAY=gateway.pinata.cloud

# Openfort
NEXT_PUBLIC_OPENFORT_PUBLISHABLE_KEY=pk_test_28fe81e1-40e5-5d35-ba6c-21192830fd93
NEXT_PUBLIC_SHIELD_PUBLISHABLE_KEY=cb7b2cd2-13a0-4259-ad32-3e7558c8f58e
```

### 2. **Start Hardhat Node**
```bash
# Terminal 1
npx hardhat node
```
Keep this running!

### 3. **Deploy Contract**
```bash
# Terminal 2
npx hardhat run scripts/deploy.js --network localhost

# Output will show:
# MediaAssetNFT deployed to: 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
```

Copy the address and update `.env.local`

### 4. **Fund Test Wallet**
```bash
# Terminal 3 - Open Hardhat console
npx hardhat console --network localhost

# In console:
const signers = await ethers.getSigners();
await signers[0].sendTransaction({
  to: "0xYOUR_WALLET_ADDRESS",
  value: ethers.utils.parseEther("5600")
});
```

### 5. **Start Next.js**
```bash
# Terminal 2
npm run dev
```

Open http://localhost:3000

---

## Usage Examples

### Example 1: Connect with Google
```
1. Click "Connect Wallet"
2. Choose "Continue with Google"
3. Sign in with Google account
4. Openfort creates embedded wallet
5. âœ… Connected!
```

### Example 2: Switch Networks
```
1. Click network button (shows "ğŸŸ¢ Hardhat Local")
2. Click "ğŸ”µ Arbitrum Sepolia"
3. Wallet switches network
4. Balance updates to new network
```

### Example 3: Copy Address
```
1. Click wallet balance/address
2. Click ğŸ“‹ copy icon
3. See "âœ“ Copied to clipboard!"
4. Paste anywhere: 0xAbc123...def456
```

### Example 4: Upload Asset
```
1. Fill form:
   - Title: "Chill Lofi Beat"
   - File: beat.mp3
   - Price: 0.5 ETH
2. Click "ğŸš€ Upload & Mint NFT"
3. Approve transaction in Openfort popup
4. Wait for confirmation
5. âœ… Asset appears in gallery!
```

### Example 5: Purchase Asset
```
1. Click asset in gallery
2. Listen to watermarked preview
3. Click "Purchase for 0.5 ETH"
4. Approve payment transaction
5. Wait for decryption key
6. Download full-quality file
7. âœ… Your purchase!
```

---

## Troubleshooting

### Issue: "Insufficient funds"
**Solution:**
- Check you're on correct network (Hardhat Local)
- Fund your wallet using Hardhat console
- Verify balance shows in wallet dropdown

### Issue: "Transaction failed"
**Solution:**
- Ensure Hardhat node is running
- Check contract address matches deployed contract
- Try switching network back and forth

### Issue: "Cannot connect wallet"
**Solution:**
- Check `.env.local` has Openfort keys
- Restart dev server: `npm run dev`
- Clear browser cache

### Issue: "Network not showing"
**Solution:**
- Add Hardhat network to MetaMask:
  - Network: Hardhat Local
  - RPC: http://127.0.0.1:8545
  - Chain ID: 31337

---

## Feature Comparison

| Feature | RainbowKit (Old) | Openfort (New) |
|---------|------------------|----------------|
| Google Login | âŒ | âœ… |
| Network Selector | Basic | âœ… Enhanced with dropdown |
| Copy Address | âŒ | âœ… One-click copy |
| Balance Display | Basic | âœ… Real-time per network |
| Payment Gateway | Basic | âœ… Enhanced with useSendTransaction |
| Embedded Wallets | âŒ | âœ… Openfort Shield |
| Mobile Support | Limited | âœ… Full support |
| Account Abstraction | âŒ | âœ… Smart accounts |

---

## Testing Checklist

- [ ] Connect with Google âœ“
- [ ] Connect with MetaMask âœ“
- [ ] Switch to Hardhat Local âœ“
- [ ] Switch to Arbitrum Sepolia âœ“
- [ ] Copy wallet address âœ“
- [ ] Check balance updates âœ“
- [ ] Upload and mint NFT âœ“
- [ ] Purchase NFT âœ“
- [ ] Receive decryption key âœ“
- [ ] Download full file âœ“
- [ ] Test collaborator splits âœ“
- [ ] Disconnect wallet âœ“

---

## Next Steps

1. **Add More Networks**
   - Edit `config/wagmi.ts`
   - Add chain definitions
   - Update transports

2. **Enable Gasless Transactions**
   - Set up Openfort policy in dashboard
   - Configure gas sponsorship
   - Update transaction calls

3. **Add Fiat On-Ramp**
   - Integrate Stripe
   - Add card payment option
   - Convert USD â†’ ETH

4. **Deploy to Testnet**
   ```bash
   npx hardhat run scripts/deploy.js --network arbitrumSepolia
   ```

---

**Ready to build? Start with:** `npm run dev` ğŸš€
